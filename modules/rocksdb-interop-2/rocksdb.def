package = org.rocksdb

headers = c.h

headerFilter = *

libraryPaths = lib

compilerOpts = -Iinclude

staticLibraries = librocksdb.a \
                  libbz2.a \
                  liblz4.a \
                  libsnappy.a \
                  libz.a \
                  libzstd.a

excludeDependentModules = false


linkerOpts.osx = -lz
linkerOpts.linux = -lz
linkerOpts.mingw = -lz -lshlwapi -lrpcrt4


strictEnums = AccessHint

excludedFunctions = \
 rocksdb_options_set_access_hint_on_compaction_start \
 rocksdb_options_get_access_hint_on_compaction_start


#language=c
---

// c.h uses an int to represent AccessHint - so manually define an enum

typedef enum {
  NONE = 0,
  NORMAL = 1,
  SEQUENTIAL = 2,
  WILL_NEED = 3
} AccessHint;

static AccessHint rocksdb_options_get_access_hint_on_compaction_start__(
  rocksdb_options_t* opt
) {
  return rocksdb_options_get_access_hint_on_compaction_start(opt);
};

static void rocksdb_options_set_access_hint_on_compaction_start__(
  rocksdb_options_t* opt,
  AccessHint access_hint
) {
  rocksdb_options_set_access_hint_on_compaction_start(opt, access_hint);
};
